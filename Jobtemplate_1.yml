
- name: 
  hosts: webservers
  #connection: local
  become: true
  gather_facts: false

  tasks:
    - name: Task 1
      tower_organization:
        name: "XYZ"
        description: "Trial Task for Creating Tower Organization"
        state: present
        #tower_host: localhost
        tower_username: admin
        tower_password: Admin@123
        validate_certs: no
        tower_config_file: "/home/ubuntu/.tower_cli.cfg"
      # tags:
        # - prod
        # Location of Tower_config_file in Tower VM

    - name: Task 2
      tower_user:
        username: "tamil"
        first_name: "tamilvanan"
        last_name: "aabhavanan"
        email: "tamilvanan7@engineer.com"
        state: present
        password: "Praveen@123"
        # tower_host: localhost
        tower_username: admin
        tower_password: Admin@123
        validate_certs: no
        tower_config_file: "/home/ubuntu/.tower_cli.cfg"
      # tags:
        # - prod
        # Location of Tower_config_file in Tower VM

    # - name: Task 3
      # tower_role:
        # organization: "XYZ"
        # user: tamil
        # role: admin
        # state: present
        # tower_host: "localhost"
        # tower_username: admin
        # tower_password: Admin@123
        # validate_certs: no
        # tower_config_file: "/home/ubuntu/.tower_cli.cfg"

    - name: Add jdoe to the member role of My Team
      tower_role:
        user: tamil
        # organization: "XYZ"
        # target_team: "My Team"
        role: admin
        state: present
        tower_config_file: "/home/ubuntu/.tower_cli.cfg"
